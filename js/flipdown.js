function _typeof(b){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){a=function a(c){return typeof c}}else{a=function a(c){return c&&typeof Symbol==="function"&&c.constructor===Symbol&&c!==Symbol.prototype?"symbol":typeof c}}return a(b)}function _classCallCheck(a,b){if(!(a instanceof b)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(d,b){for(var a=0;a<b.length;a++){var c=b[a];c.enumerable=c.enumerable||false;c.configurable=true;if("value" in c){c.writable=true}Object.defineProperty(d,c.key,c)}}function _createClass(c,a,b){if(a){_defineProperties(c.prototype,a)}if(b){_defineProperties(c,b)}return c}var FlipDown=function(){function f(m){var o=arguments.length>1&&arguments[1]!==undefined?arguments[1]:"flipdown";var n=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{};_classCallCheck(this,f);if(_typeof(o)==="object"){n=o;o="flipdown"}this.version="0.2.2";this.initialised=false;this.now=this._getTime();this.epoch=m;this.countdownEnded=false;this.hasEndedCallback=null;this.element=document.getElementById(o);this.rotors=[];this.rotorLeafFront=[];this.rotorLeafRear=[];this.rotorTops=[];this.rotorBottoms=[];this.countdown=null;this.daysRemaining=0;this.clockValues={};this.clockStrings={};this.clockValuesAsString=[];this.prevClockValuesAsString=[];this.opts=this._parseOptions(n);this._setOptions()}_createClass(f,[{key:"start",value:function a(){if(!this.initialised){this._init()}this.countdown=setInterval(this._tick.bind(this),1000);return this}},{key:"ifEnded",value:function i(m){this.hasEndedCallback=function(){m();this.hasEndedCallback=null};return this}},{key:"_getTime",value:function d(){return new Date().getTime()/1000}},{key:"_hasCountdownEnded",value:function e(){if(this.epoch-this.now<0){this.countdownEnded=true;if(this.hasEndedCallback!=null){this.hasEndedCallback();this.hasEndedCallback=null}return true}else{this.countdownEnded=false;return false}}},{key:"_parseOptions",value:function k(m){return{theme:m.hasOwnProperty("theme")?m.theme:"dark"}}},{key:"_setOptions",value:function l(){this.element.classList.add("flipdown__theme-".concat(this.opts.theme))}},{key:"_init",value:function g(){this.initialised=true;if(this._hasCountdownEnded()){this.daysremaining=0}else{this.daysremaining=Math.floor((this.epoch-this.now)/86400).toString().length}var q=this.daysremaining<=2?2:this.daysremaining;for(var o=0;o<q+6;o++){this.rotors.push(this._createRotor(0))}var r=[];for(var o=0;o<q;o++){r.push(this.rotors[o])}this.element.appendChild(this._createRotorGroup(r));var p=q;for(var o=0;o<3;o++){var m=[];for(var n=0;n<2;n++){m.push(this.rotors[p]);p++}this.element.appendChild(this._createRotorGroup(m))}this.rotorLeafFront=Array.prototype.slice.call(this.element.getElementsByClassName("rotor-leaf-front"));this.rotorLeafRear=Array.prototype.slice.call(this.element.getElementsByClassName("rotor-leaf-rear"));this.rotorTop=Array.prototype.slice.call(this.element.getElementsByClassName("rotor-top"));this.rotorBottom=Array.prototype.slice.call(this.element.getElementsByClassName("rotor-bottom"));this._tick();this._updateClockValues(true);return this}},{key:"_createRotorGroup",value:function h(n){var m=document.createElement("div");m.className="rotor-group";var o=document.createElement("div");o.className="rotor-group-heading";appendChildren(m,n);m.appendChild(o);return m}},{key:"_createRotor",value:function j(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:0;var r=document.createElement("div");var o=document.createElement("div");var n=document.createElement("figure");var p=document.createElement("figure");var q=document.createElement("div");var u=document.createElement("div");var m=document.createElement("div");m.className="rotor-top-shadow";var s=document.createElement("div");s.className="rotor-bottom-shadow";r.className="rotor";o.className="rotor-leaf";n.className="rotor-leaf-rear";p.className="rotor-leaf-front";q.className="rotor-top";u.className="rotor-bottom";n.textContent=t;q.textContent=t;u.textContent=t;appendChildren(r,[o,q,u,s]);appendChildren(o,[n,p,m]);return r}},{key:"_tick",value:function b(){this.now=this._getTime();var m=this.epoch-this.now<=0?0:this.epoch-this.now;this.clockValues.d=Math.floor(m/86400);m-=this.clockValues.d*86400;this.clockValues.h=Math.floor(m/3600);m-=this.clockValues.h*3600;this.clockValues.m=Math.floor(m/60);m-=this.clockValues.m*60;this.clockValues.s=Math.floor(m);this._updateClockValues();this._hasCountdownEnded()}},{key:"_updateClockValues",value:function c(){var q=this;var p=arguments.length>0&&arguments[0]!==undefined?arguments[0]:false;this.clockStrings.d=pad(this.clockValues.d,2);this.clockStrings.h=pad(this.clockValues.h,2);this.clockStrings.m=pad(this.clockValues.m,2);this.clockStrings.s=pad(this.clockValues.s,2);this.clockValuesAsString=(this.clockStrings.d+this.clockStrings.h+this.clockStrings.m+this.clockStrings.s).split("");this.rotorLeafFront.forEach(function(s,r){s.textContent=q.prevClockValuesAsString[r]});this.rotorBottom.forEach(function(s,r){s.textContent=q.prevClockValuesAsString[r]});function n(){var r=this;this.rotorTop.forEach(function(t,s){if(t.textContent!=r.clockValuesAsString[s]){t.classList.add("fadeout");t.textContent=r.clockValuesAsString[s];var u=setInterval(function(){t.classList.remove("fadeout");clearInterval(u)}.bind(r),950)}else{t.classList.remove("fadeout")}})}function o(){var r=this;var s;this.rotorBottom.forEach(function(u,t){s=u.nextSibling;if(u.textContent!=r.clockValuesAsString[t]){s.classList.add("bottom-active");var v=setInterval(function(){s.classList.remove("bottom-active");clearInterval(v)}.bind(r),950)}else{s.classList.remove("bottom-active")}})}function m(){var r=this;this.rotorLeafRear.forEach(function(u,t){var s=u.nextSibling;var v;v=s.nextSibling;if(u.textContent!=r.clockValuesAsString[t]){u.textContent=r.clockValuesAsString[t];u.parentElement.classList.add("flipped");v.classList.add("active");var w=setInterval(function(){u.parentElement.classList.remove("flipped");v.classList.remove("active");clearInterval(w)}.bind(r),950)}})}if(!p){setTimeout(n.bind(this),350);setTimeout(o.bind(this),1100);setTimeout(m.bind(this),350)}else{n.call(this);m.call(this)}this.prevClockValuesAsString=this.clockValuesAsString}}]);return f}();function pad(b,a){b=b.toString();return b.length<a?pad("0"+b,a):b}function appendChildren(b,a){a.forEach(function(c){b.appendChild(c)})};